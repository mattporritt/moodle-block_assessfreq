{"version":3,"sources":["../src/main.js"],"names":["define","Main","today","Date","daysInMonth","month","year","getDate","generateCalendar","containerdiv","firstDay","getDay","tbl","getElementsByTagName","innerHTML","date","i","row","document","createElement","j","cell","cellText","createTextNode","appendChild","getFullYear","getMonth","classList","add","init","root","containerdivs","children","length"],"mappings":"AAuBAA,OAAM,yBAAC,EAAD,CAAK,UAAW,IAKdC,CAAAA,CAAI,CAAG,EALO,CAMdC,CAAK,CAAG,GAAIC,CAAAA,IANE,CAYlB,QAASC,CAAAA,CAAT,CAAqBC,CAArB,CAA4BC,CAA5B,CAAkC,CAC9B,MAAO,IAAK,GAAIH,CAAAA,IAAJ,CAASG,CAAT,CAAeD,CAAf,CAAsB,EAAtB,EAA0BE,OAA1B,EACf,CAKD,QAASC,CAAAA,CAAT,CAA0BH,CAA1B,CAAiCC,CAAjC,CAAuCG,CAAvC,CAAqD,IAE7CC,CAAAA,CAAQ,CAAI,GAAIP,CAAAA,IAAJ,CAASG,CAAT,CAAeD,CAAf,CAAD,CAAwBM,MAAxB,EAFkC,CAG7CC,CAAG,CAAGH,CAAY,CAACI,oBAAb,CAAkC,OAAlC,EAA2C,CAA3C,CAHuC,CAMjDD,CAAG,CAACE,SAAJ,CAAgB,EAAhB,CAIA,OADIC,CAAAA,CAAI,CAAG,CACX,CAASC,CAAC,CAAG,CAAb,CAEQC,CAFR,CAAoB,CAAJ,CAAAD,CAAhB,CAAuBA,CAAC,EAAxB,CAA4B,CAEpBC,CAFoB,CAEdC,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAFc,CAKxB,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAoB,CAAJ,CAAAA,CAAhB,CAAuBA,CAAC,EAAxB,CAA4B,CACxB,GAAU,CAAN,EAAAJ,CAAC,EAAUI,CAAC,CAAGV,CAAnB,CAA6B,IACrBW,CAAAA,CAAI,CAAGH,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CADc,CAErBG,CAAQ,CAAGJ,QAAQ,CAACK,cAAT,CAAwB,EAAxB,CAFU,CAGzBF,CAAI,CAACG,WAAL,CAAiBF,CAAjB,EACAL,CAAG,CAACO,WAAJ,CAAgBH,CAAhB,CACH,CALD,IAMK,IAAIN,CAAI,CAAGX,CAAW,CAACC,CAAD,CAAQC,CAAR,CAAtB,CAAqC,CACtC,KACH,CAFI,IAIA,CACDe,CAAI,CAAGH,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAP,CACAG,CAAQ,CAAGJ,QAAQ,CAACK,cAAT,CAAwBR,CAAxB,CAAX,CACA,GAAIA,CAAI,GAAKb,CAAK,CAACK,OAAN,EAAT,EAA4BD,CAAI,GAAKJ,CAAK,CAACuB,WAAN,EAArC,EAA4DpB,CAAK,GAAKH,CAAK,CAACwB,QAAN,EAA1E,CAA4F,CACxFL,CAAI,CAACM,SAAL,CAAeC,GAAf,CAAmB,SAAnB,CACH,CACDP,CAAI,CAACG,WAAL,CAAiBF,CAAjB,EACAL,CAAG,CAACO,WAAJ,CAAgBH,CAAhB,EACAN,CAAI,EACP,CAEJ,CAEDH,CAAG,CAACY,WAAJ,CAAgBP,CAAhB,CACH,CAEJ,CAODhB,CAAI,CAAC4B,IAAL,CAAY,SAASC,CAAT,CAAe,CASvB,OANIC,CAAAA,CAAa,CADOD,CACJ,CAAkBE,QAMtC,CAHI3B,CAAK,CAAGH,CAAK,CAACwB,QAAN,EAGZ,CAFIpB,CAAI,CAAGJ,CAAK,CAACuB,WAAN,EAEX,CAAST,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGe,CAAa,CAACE,MAAlC,CAA0CjB,CAAC,EAA3C,CAA+C,CAC3CR,CAAgB,CAACH,CAAD,CAAQC,CAAR,CAAcyB,CAAa,CAACf,CAAD,CAA3B,CAAhB,CACAX,CAAK,EACN,CACN,CAbD,CAeA,MAAOJ,CAAAA,CACV,CApFK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the myoverview block.\n *\n * @package    block_myoverview\n * @copyright  2018 Bas Brands <bas@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([], function() {\n\n    /**\n     * Module level variables.\n     */\n    var Main = {};\n    var today = new Date();\n\n    /**\n     * Check how many days in a month code.\n     * from https://dzone.com/articles/determining-number-days-month.\n     */\n    function daysInMonth(month, year) {\n        return 32 - new Date(year, month, 32).getDate();\n    }\n\n    /**\n     * Generate calendar markup for the month.\n     */\n    function generateCalendar(month, year, containerdiv) {\n\n        let firstDay = (new Date(year, month)).getDay();  // Get the starting day of the month.\n        var tbl = containerdiv.getElementsByTagName(\"tbody\")[0];\n\n        // Clearing all previous cells.\n        tbl.innerHTML = \"\";\n\n        // Creating all cells.\n        let date = 1;\n        for (let i = 0; i < 6; i++) {\n            // Creates a table row.\n            let row = document.createElement(\"tr\");\n\n            // Creating individual cells, filing them up with data.\n            for (let j = 0; j < 7; j++) {\n                if (i === 0 && j < firstDay) {\n                    var cell = document.createElement(\"td\");\n                    var cellText = document.createTextNode(\"\");\n                    cell.appendChild(cellText);\n                    row.appendChild(cell);\n                }\n                else if (date > daysInMonth(month, year)) {\n                    break;\n                }\n\n                else {\n                    cell = document.createElement(\"td\");\n                    cellText = document.createTextNode(date);\n                    if (date === today.getDate() && year === today.getFullYear() && month === today.getMonth()) {\n                        cell.classList.add(\"bg-info\");\n                    } // Color today's date.\n                    cell.appendChild(cellText);\n                    row.appendChild(cell);\n                    date++;\n                }\n\n            }\n\n            tbl.appendChild(row); // Appending each row into calendar body.\n        }\n\n    }\n\n    /**\n     * Initialise all of the modules for the assessment frequency block.\n     *\n     * @param {object} root The root element for the assessment frequency block.\n     */\n    Main.init = function(root) {\n        // Get the containers that will hold the months.\n        var calendarContainer = root;\n        var containerdivs = calendarContainer.children;\n\n        // Start with current month and year\n        var month = today.getMonth();\n        var year = today.getFullYear();\n\n        for (let i = 0; i < containerdivs.length; i++) {\n            generateCalendar(month, year, containerdivs[i]);\n            month++;\n          }\n    };\n\n    return Main;\n});\n"],"file":"main.min.js"}